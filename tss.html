<!DOCTYPE html>
<html>
<head>
    <title>VAST Ad Example</title>
    <style>
        #video-container {
            width: 640px;
            height: 360px;
            margin: 0 auto;
            background: #000;
        }
        #video-player {
            width: 100%;
            height: 100%;
        }
        #ad-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Video Container -->
    <div id="video-container">
        <video id="video-player" controls></video>
        <div id="ad-container"></div>
    </div>

    <!-- Load Google IMA SDK -->
    <script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>

    <script>
        // 1. Wait for the page to load
        document.addEventListener('DOMContentLoaded', function() {
            // 2. Get video player and ad container
            const videoPlayer = document.getElementById('video-player');
            const adContainer = document.getElementById('ad-container');

            // 3. Initialize IMA SDK
            const adDisplayContainer = new google.ima.AdDisplayContainer(adContainer, videoPlayer);
            const adsLoader = new google.ima.AdsLoader(adDisplayContainer);

            // 4. Set up VAST ad request
            const adsRequest = new google.ima.AdsRequest();
            adsRequest.adTagUrl = 'https://idioticleadership.com/dmmqFoz.diG-NWv/ZzGlUf/Ge/mt9SurZIUblkkyPoT/YR1-MejOIS0kOgTNIFteNojHUFycM_jSQP5nMrwO'; // Replace with your VAST URL
            adsRequest.linearAdSlotWidth = 640;
            adsRequest.linearAdSlotHeight = 360;

            // 5. Handle ad events
            adsLoader.addEventListener(
                google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
                onAdsManagerLoaded
            );
            adsLoader.addEventListener(
                google.ima.AdErrorEvent.Type.AD_ERROR,
                onAdError
            );

            // 6. Request ads
            adDisplayContainer.initialize();
            adsLoader.requestAds(adsRequest);

            // 7. Play ads when ready
            function onAdsManagerLoaded(event) {
                const adsManager = event.getAdsManager(videoPlayer);
                adsManager.init(640, 360, google.ima.ViewMode.NORMAL);
                adsManager.start();
            }

            // 8. Handle errors (e.g., no ad returned)
            function onAdError(error) {
                console.error('VAST Error:', error.getError());
                videoPlayer.play(); // Fallback to regular content
            }
        });
    </script>
</body>
</html>